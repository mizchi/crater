<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Crater JS DOM Test</title>
  <style>
    body { margin: 0; padding: 10px; font-family: sans-serif; }
    .pass { color: green; }
    .fail { color: red; }
    #results { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Crater JS DOM Test</h1>
  <div id="test-container"></div>
  <div id="results"></div>

  <script>
    // Simple test runner
    const results = [];

    function test(name, fn) {
      try {
        fn();
        results.push({ name, passed: true });
      } catch (e) {
        results.push({ name, passed: false, error: e.message });
      }
    }

    function assert(condition, message) {
      if (!condition) {
        throw new Error(message || 'Assertion failed');
      }
    }

    function assertEqual(actual, expected, message) {
      if (actual !== expected) {
        throw new Error(message || `Expected ${expected}, got ${actual}`);
      }
    }

    // Tests
    test('document.createElement creates element', () => {
      const div = document.createElement('div');
      assert(div !== null, 'createElement should return element');
      assertEqual(div.tagName, 'DIV', 'tagName should be DIV');
    });

    test('element.setAttribute and getAttribute work', () => {
      const div = document.createElement('div');
      div.setAttribute('id', 'test-id');
      div.setAttribute('class', 'test-class');
      assertEqual(div.getAttribute('id'), 'test-id');
      assertEqual(div.getAttribute('class'), 'test-class');
    });

    test('document.body.appendChild adds element to DOM', () => {
      const container = document.getElementById('test-container');
      const div = document.createElement('div');
      div.setAttribute('id', 'appended-div');
      container.appendChild(div);
      const found = document.getElementById('appended-div');
      assert(found !== null, 'appendChild should add element to DOM');
    });

    test('document.getElementById finds element', () => {
      const div = document.createElement('div');
      div.setAttribute('id', 'findme');
      document.body.appendChild(div);
      const found = document.getElementById('findme');
      assert(found !== null, 'getElementById should find element');
      assertEqual(found.getAttribute('id'), 'findme');
    });

    test('element.textContent works', () => {
      const div = document.createElement('div');
      div.textContent = 'Hello World';
      assertEqual(div.textContent, 'Hello World');
    });

    // Output results
    const resultsDiv = document.getElementById('results');
    let passed = 0;
    let failed = 0;

    results.forEach(r => {
      const p = document.createElement('p');
      if (r.passed) {
        p.setAttribute('class', 'pass');
        p.textContent = '✓ ' + r.name;
        passed++;
      } else {
        p.setAttribute('class', 'fail');
        p.textContent = '✗ ' + r.name + ': ' + r.error;
        failed++;
      }
      resultsDiv.appendChild(p);
    });

    const summary = document.createElement('p');
    summary.textContent = 'Total: ' + results.length + ', Passed: ' + passed + ', Failed: ' + failed;
    resultsDiv.appendChild(summary);

    console.log('Test Results:', passed + '/' + results.length + ' passed');
  </script>
</body>
</html>
